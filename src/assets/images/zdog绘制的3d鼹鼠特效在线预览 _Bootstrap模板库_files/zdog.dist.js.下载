/*
 * Zdog v1.1.2
 * Round, flat, designer-friendly pseudo-3D engine
 * Licensed MIT
 * https://zzz.dog
 * Copyright 2020 Metafizzy
 */
(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a()}else{b.Zdog=a()}}(this,function factory(){var b={};b.TAU=Math.PI*2;b.extend=function(c,d){for(var e in d){c[e]=d[e]}return c};b.lerp=function(c,e,d){return(e-c)*d+c};b.modulo=function(d,c){return((d%c)+c)%c};var a={2:function(c){return c*c},3:function(c){return c*c*c},4:function(c){return c*c*c*c},5:function(c){return c*c*c*c*c},};b.easeInOut=function(c,f){if(f==1){return c}c=Math.max(0,Math.min(1,c));var e=c<0.5;var h=e?c:1-c;h/=0.5;var g=a[f]||a[2];var d=g(h);d/=2;return e?d:1-d};return b}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a()}else{b.Zdog.CanvasRenderer=a()}}(this,function factory(){var a={isCanvas:true};a.begin=function(b){b.beginPath()};a.move=function(b,c,d){b.moveTo(d.x,d.y)};a.line=function(b,c,d){b.lineTo(d.x,d.y)};a.bezier=function(d,e,b,c,f){d.bezierCurveTo(b.x,b.y,c.x,c.y,f.x,f.y)};a.closePath=function(b){b.closePath()};a.setPath=function(){};a.renderPath=function(b,c,e,d){this.begin(b,c);e.forEach(function(f){f.render(b,c,a)});if(d){this.closePath(b,c)}};a.stroke=function(c,d,e,b,f){if(!e){return}c.strokeStyle=b;c.lineWidth=f;c.stroke()};a.fill=function(c,d,e,b){if(!e){return}c.fillStyle=b;c.fill()};a.end=function(){};return a}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a()}else{b.Zdog.SvgRenderer=a()}}(this,function factory(){var c={isSvg:true};var b=c.round=function(d){return Math.round(d*1000)/1000};function a(d){return b(d.x)+","+b(d.y)+" "}c.begin=function(){};c.move=function(f,d,e){return"M"+a(e)};c.line=function(f,d,e){return"L"+a(e)};c.bezier=function(h,f,d,e,g){return"C"+a(d)+a(e)+a(g)};c.closePath=function(){return"Z"};c.setPath=function(f,d,e){d.setAttribute("d",e)};c.renderPath=function(h,d,f,e){var g="";f.forEach(function(i){g+=i.render(h,d,c)});if(e){g+=this.closePath(h,d)}this.setPath(h,d,g)};c.stroke=function(h,e,f,d,g){if(!f){return}e.setAttribute("stroke",d);e.setAttribute("stroke-width",g)};c.fill=function(h,e,g,d){var f=g?d:"none";e.setAttribute("fill",f)};c.end=function(e,d){e.appendChild(d)};return c}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./boilerplate"))}else{var c=b.Zdog;c.Vector=a(c)}}(this,function factory(d){function e(f){this.set(f)}var c=d.TAU;e.prototype.set=function(f){this.x=f&&f.x||0;this.y=f&&f.y||0;this.z=f&&f.z||0;return this};e.prototype.write=function(f){if(!f){return this}this.x=f.x!=undefined?f.x:this.x;this.y=f.y!=undefined?f.y:this.y;this.z=f.z!=undefined?f.z:this.z;return this};e.prototype.rotate=function(f){if(!f){return}this.rotateZ(f.z);this.rotateY(f.y);this.rotateX(f.x);return this};e.prototype.rotateZ=function(f){b(this,f,"x","y")};e.prototype.rotateX=function(f){b(this,f,"y","z")};e.prototype.rotateY=function(f){b(this,f,"x","z")};function b(m,g,j,k){if(!g||g%c===0){return}var i=Math.cos(g);var l=Math.sin(g);var f=m[j];var h=m[k];m[j]=f*i-h*l;m[k]=h*i+f*l}e.prototype.isSame=function(f){if(!f){return false}return this.x===f.x&&this.y===f.y&&this.z===f.z};e.prototype.add=function(f){if(!f){return this}this.x+=f.x||0;this.y+=f.y||0;this.z+=f.z||0;return this};e.prototype.subtract=function(f){if(!f){return this}this.x-=f.x||0;this.y-=f.y||0;this.z-=f.z||0;return this};e.prototype.multiply=function(f){if(f==undefined){return this}if(typeof f=="number"){this.x*=f;this.y*=f;this.z*=f}else{this.x*=f.x!=undefined?f.x:1;this.y*=f.y!=undefined?f.y:1;this.z*=f.z!=undefined?f.z:1}return this};e.prototype.transform=function(h,f,g){this.multiply(g);this.rotate(f);this.add(h);return this};e.prototype.lerp=function(g,f){this.x=d.lerp(this.x,g.x||0,f);this.y=d.lerp(this.y,g.y||0,f);this.z=d.lerp(this.z,g.z||0,f);return this};e.prototype.magnitude=function(){var f=this.x*this.x+this.y*this.y+this.z*this.z;return a(f)};function a(f){if(Math.abs(f-1)<1e-08){return 1}return Math.sqrt(f)}e.prototype.magnitude2d=function(){var f=this.x*this.x+this.y*this.y;return a(f)};e.prototype.copy=function(){return new e(this)};return e}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./boilerplate"),require("./vector"),require("./canvas-renderer"),require("./svg-renderer"))}else{var c=b.Zdog;c.Anchor=a(c,c.Vector,c.CanvasRenderer,c.SvgRenderer)}}(this,function factory(g,h,b,e){var f=g.TAU;var d={x:1,y:1,z:1};function a(i){this.create(i||{})}a.prototype.create=function(i){this.children=[];g.extend(this,this.constructor.defaults);this.setOptions(i);this.translate=new h(i.translate);this.rotate=new h(i.rotate);this.scale=new h(d).multiply(this.scale);this.origin=new h();this.renderOrigin=new h();if(this.addTo){this.addTo.addChild(this)}};a.defaults={};a.optionKeys=Object.keys(a.defaults).concat(["rotate","translate","scale","addTo",]);a.prototype.setOptions=function(k){var j=this.constructor.optionKeys;for(var i in k){if(j.indexOf(i)!=-1){this[i]=k[i]}}};a.prototype.addChild=function(i){if(this.children.indexOf(i)!=-1){return}i.remove();i.addTo=this;this.children.push(i)};a.prototype.removeChild=function(j){var i=this.children.indexOf(j);if(i!=-1){this.children.splice(i,1)}};a.prototype.remove=function(){if(this.addTo){this.addTo.removeChild(this)}};a.prototype.update=function(){this.reset();this.children.forEach(function(i){i.update()});this.transform(this.translate,this.rotate,this.scale)};a.prototype.reset=function(){this.renderOrigin.set(this.origin)};a.prototype.transform=function(k,i,j){this.renderOrigin.transform(k,i,j);this.children.forEach(function(l){l.transform(k,i,j)})};a.prototype.updateGraph=function(){this.update();this.updateFlatGraph();this.flatGraph.forEach(function(i){i.updateSortValue()});this.flatGraph.sort(a.shapeSorter)};a.shapeSorter=function(i,j){return i.sortValue-j.sortValue};Object.defineProperty(a.prototype,"flatGraph",{get:function(){if(!this._flatGraph){this.updateFlatGraph()}return this._flatGraph},set:function(i){this._flatGraph=i},});a.prototype.updateFlatGraph=function(){this.flatGraph=this.getFlatGraph()};a.prototype.getFlatGraph=function(){var i=[this];return this.addChildFlatGraph(i)};a.prototype.addChildFlatGraph=function(i){this.children.forEach(function(j){var k=j.getFlatGraph();Array.prototype.push.apply(i,k)});return i};a.prototype.updateSortValue=function(){this.sortValue=this.renderOrigin.z};a.prototype.render=function(){};a.prototype.renderGraphCanvas=function(i){if(!i){throw new Error("ctx is "+i+". Canvas context required for render. Check .renderGraphCanvas( ctx ).")}this.flatGraph.forEach(function(j){j.render(i,b)})};a.prototype.renderGraphSvg=function(i){if(!i){throw new Error("svg is "+i+". SVG required for render. Check .renderGraphSvg( svg ).")}this.flatGraph.forEach(function(j){j.render(i,e)})};a.prototype.copy=function(l){var j={};var k=this.constructor.optionKeys;k.forEach(function(m){j[m]=this[m]},this);g.extend(j,l);var i=this.constructor;return new i(j)};a.prototype.copyGraph=function(j){var i=this.copy(j);this.children.forEach(function(k){k.copyGraph({addTo:i,})});return i};a.prototype.normalizeRotate=function(){this.rotate.x=g.modulo(this.rotate.x,f);this.rotate.y=g.modulo(this.rotate.y,f);this.rotate.z=g.modulo(this.rotate.z,f)};function c(i){return function(j){function k(l){this.create(l||{})}k.prototype=Object.create(i.prototype);k.prototype.constructor=k;k.defaults=g.extend({},i.defaults);g.extend(k.defaults,j);k.optionKeys=i.optionKeys.slice(0);Object.keys(k.defaults).forEach(function(l){if(!k.optionKeys.indexOf(l)!=1){k.optionKeys.push(l)}});k.subclass=c(k);return k}}a.subclass=c(a);return a}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a()}else{b.Zdog.Dragger=a()}}(this,function factory(){var c=typeof window!="undefined";var a="mousedown";var d="mousemove";var f="mouseup";if(c){if(window.PointerEvent){a="pointerdown";d="pointermove";f="pointerup"}else{if("ontouchstart" in window){a="touchstart";d="touchmove";f="touchend"}}}function e(){}function b(g){this.create(g||{})}b.prototype.create=function(g){this.onDragStart=g.onDragStart||e;this.onDragMove=g.onDragMove||e;this.onDragEnd=g.onDragEnd||e;this.bindDrag(g.startElement)};b.prototype.bindDrag=function(g){g=this.getQueryElement(g);if(!g){return}g.style.touchAction="none";g.addEventListener(a,this)};b.prototype.getQueryElement=function(g){if(typeof g=="string"){g=document.querySelector(g)}return g};b.prototype.handleEvent=function(g){var h=this["on"+g.type];if(h){h.call(this,g)}};b.prototype.onmousedown=b.prototype.onpointerdown=function(g){this.dragStart(g,g)};b.prototype.ontouchstart=function(g){this.dragStart(g,g.changedTouches[0])};b.prototype.dragStart=function(g,h){g.preventDefault();this.dragStartX=h.pageX;this.dragStartY=h.pageY;if(c){window.addEventListener(d,this);window.addEventListener(f,this)}this.onDragStart(h)};b.prototype.ontouchmove=function(g){this.dragMove(g,g.changedTouches[0])};b.prototype.onmousemove=b.prototype.onpointermove=function(g){this.dragMove(g,g)};b.prototype.dragMove=function(g,j){g.preventDefault();var h=j.pageX-this.dragStartX;var i=j.pageY-this.dragStartY;this.onDragMove(j,h,i)};b.prototype.onmouseup=b.prototype.onpointerup=b.prototype.ontouchend=b.prototype.dragEnd=function(){window.removeEventListener(d,this);window.removeEventListener(f,this);this.onDragEnd()};return b}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./boilerplate"),require("./anchor"),require("./dragger"))}else{var c=b.Zdog;c.Illustration=a(c,c.Anchor,c.Dragger)}}(this,function factory(g,a,b){function e(){}var f=g.TAU;var d=a.subclass({element:undefined,centered:true,zoom:1,dragRotate:false,resize:false,onPrerender:e,onDragStart:e,onDragMove:e,onDragEnd:e,onResize:e,});g.extend(d.prototype,b.prototype);d.prototype.create=function(h){a.prototype.create.call(this,h);b.prototype.create.call(this,h);this.setElement(this.element);this.setDragRotate(this.dragRotate);this.setResize(this.resize)};d.prototype.setElement=function(h){h=this.getQueryElement(h);if(!h){throw new Error("Zdog.Illustration element required. Set to "+h)}var i=h.nodeName.toLowerCase();if(i=="canvas"){this.setCanvas(h)}else{if(i=="svg"){this.setSvg(h)}}};d.prototype.setSize=function(i,h){i=Math.round(i);h=Math.round(h);if(this.isCanvas){this.setSizeCanvas(i,h)}else{if(this.isSvg){this.setSizeSvg(i,h)}}};d.prototype.setResize=function(h){this.resize=h;if(!this.resizeListener){this.resizeListener=this.onWindowResize.bind(this)}if(h){window.addEventListener("resize",this.resizeListener);this.onWindowResize()}else{window.removeEventListener("resize",this.resizeListener)}};d.prototype.onWindowResize=function(){this.setMeasuredSize();this.onResize(this.width,this.height)};d.prototype.setMeasuredSize=function(){var k,h;var i=this.resize=="fullscreen";if(i){k=window.innerWidth;h=window.innerHeight}else{var j=this.element.getBoundingClientRect();k=j.width;h=j.height}this.setSize(k,h)};d.prototype.renderGraph=function(h){if(this.isCanvas){this.renderGraphCanvas(h)}else{if(this.isSvg){this.renderGraphSvg(h)}}};d.prototype.updateRenderGraph=function(h){this.updateGraph();this.renderGraph(h)};d.prototype.setCanvas=function(h){this.element=h;this.isCanvas=true;this.ctx=this.element.getContext("2d");this.setSizeCanvas(h.width,h.height)};d.prototype.setSizeCanvas=function(k,h){this.width=k;this.height=h;var j=this.pixelRatio=window.devicePixelRatio||1;this.element.width=this.canvasWidth=k*j;this.element.height=this.canvasHeight=h*j;var i=j>1&&!this.resize;if(i){this.element.style.width=k+"px";this.element.style.height=h+"px"}};d.prototype.renderGraphCanvas=function(h){h=h||this;this.prerenderCanvas();a.prototype.renderGraphCanvas.call(h,this.ctx);this.postrenderCanvas()};d.prototype.prerenderCanvas=function(){var j=this.ctx;j.lineCap="round";j.lineJoin="round";j.clearRect(0,0,this.canvasWidth,this.canvasHeight);j.save();if(this.centered){var h=this.width/2*this.pixelRatio;var i=this.height/2*this.pixelRatio;j.translate(h,i)}var k=this.pixelRatio*this.zoom;j.scale(k,k);this.onPrerender(j)};d.prototype.postrenderCanvas=function(){this.ctx.restore()};d.prototype.setSvg=function(h){this.element=h;this.isSvg=true;this.pixelRatio=1;var j=h.getAttribute("width");var i=h.getAttribute("height");this.setSizeSvg(j,i)};d.prototype.setSizeSvg=function(m,h){this.width=m;this.height=h;var j=m/this.zoom;var i=h/this.zoom;var k=this.centered?-j/2:0;var l=this.centered?-i/2:0;this.element.setAttribute("viewBox",k+" "+l+" "+j+" "+i);if(this.resize){this.element.removeAttribute("width");this.element.removeAttribute("height")}else{this.element.setAttribute("width",m);this.element.setAttribute("height",h)}};d.prototype.renderGraphSvg=function(h){h=h||this;c(this.element);this.onPrerender(this.element);a.prototype.renderGraphSvg.call(h,this.element)};function c(h){while(h.firstChild){h.removeChild(h.firstChild)}}d.prototype.setDragRotate=function(h){if(!h){return}else{if(h===true){h=this}}this.dragRotate=h;this.bindDrag(this.element)};d.prototype.dragStart=function(){this.dragStartRX=this.dragRotate.rotate.x;this.dragStartRY=this.dragRotate.rotate.y;b.prototype.dragStart.apply(this,arguments)};d.prototype.dragMove=function(i,n){var l=n.pageX-this.dragStartX;var m=n.pageY-this.dragStartY;var h=Math.min(this.width,this.height);var k=l/h*f;var j=m/h*f;this.dragRotate.rotate.x=this.dragStartRX-j;this.dragRotate.rotate.y=this.dragStartRY-k;b.prototype.dragMove.apply(this,arguments)};return d}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./vector"))}else{var c=b.Zdog;c.PathCommand=a(c.Vector)}}(this,function factory(e){function d(f,g,h){this.method=f;this.points=g.map(c);this.renderPoints=g.map(b);this.previousPoint=h;this.endRenderPoint=this.renderPoints[this.renderPoints.length-1];if(f=="arc"){this.controlPoints=[new e(),new e()]}}function c(f){if(f instanceof e){return f}else{return new e(f)}}function b(f){return new e(f)}d.prototype.reset=function(){var f=this.points;this.renderPoints.forEach(function(j,g){var h=f[g];j.set(h)})};d.prototype.transform=function(h,f,g){this.renderPoints.forEach(function(i){i.transform(h,f,g)})};d.prototype.render=function(f,g,h){return this[this.method](f,g,h)};d.prototype.move=function(f,g,h){return h.move(f,g,this.renderPoints[0])};d.prototype.line=function(f,g,h){return h.line(f,g,this.renderPoints[0])};d.prototype.bezier=function(h,i,k){var f=this.renderPoints[0];var g=this.renderPoints[1];var j=this.renderPoints[2];return k.bezier(h,i,f,g,j)};var a=9/16;d.prototype.arc=function(i,j,m){var l=this.previousPoint;var f=this.renderPoints[0];var k=this.renderPoints[1];var g=this.controlPoints[0];var h=this.controlPoints[1];g.set(l).lerp(f,a);h.set(k).lerp(f,a);return m.bezier(i,j,g,h,k)};return d}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./boilerplate"),require("./vector"),require("./path-command"),require("./anchor"))}else{var c=b.Zdog;c.Shape=a(c,c.Vector,c.PathCommand,c.Anchor)}}(this,function factory(g,h,c,b){var d=b.subclass({stroke:1,fill:false,color:"#333",closed:true,visible:true,path:[{}],front:{z:1},backface:true,});d.prototype.create=function(i){b.prototype.create.call(this,i);this.updatePath();this.front=new h(i.front||this.front);this.renderFront=new h(this.front);this.renderNormal=new h()};var a=["move","line","bezier","arc",];d.prototype.updatePath=function(){this.setPath();this.updatePathCommands()};d.prototype.setPath=function(){};d.prototype.updatePathCommands=function(){var i;this.pathCommands=this.path.map(function(q,k){var o=Object.keys(q);var p=o[0];var r=q[p];var l=o.length==1&&a.indexOf(p)!=-1;if(!l){p="line";r=q}var m=p=="line"||p=="move";var n=Array.isArray(r);if(m&&!n){r=[r]}p=k===0?"move":p;var j=new c(p,r,i);i=j.endRenderPoint;return j})};d.prototype.reset=function(){this.renderOrigin.set(this.origin);this.renderFront.set(this.front);this.pathCommands.forEach(function(i){i.reset()})};d.prototype.transform=function(k,i,j){this.renderOrigin.transform(k,i,j);this.renderFront.transform(k,i,j);this.renderNormal.set(this.renderOrigin).subtract(this.renderFront);this.pathCommands.forEach(function(l){l.transform(k,i,j)});this.children.forEach(function(l){l.transform(k,i,j)})};d.prototype.updateSortValue=function(){var n=this.pathCommands.length;var j=this.pathCommands[0].endRenderPoint;var m=this.pathCommands[n-1].endRenderPoint;var l=n>2&&j.isSame(m);if(l){n-=1}var o=0;for(var k=0;k<n;k++){o+=this.pathCommands[k].endRenderPoint.z}this.sortValue=o/n};d.prototype.render=function(i,l){var k=this.pathCommands.length;if(!this.visible||!k){return}this.isFacingBack=this.renderNormal.z>0;if(!this.backface&&this.isFacingBack){return}if(!l){throw new Error("Zdog renderer required. Set to "+l)}var j=k==1;if(l.isCanvas&&j){this.renderCanvasDot(i,l)}else{this.renderPath(i,l)}};var f=g.TAU;d.prototype.renderCanvasDot=function(i){var j=this.getLineWidth();if(!j){return}i.fillStyle=this.getRenderColor();var k=this.pathCommands[0].endRenderPoint;i.beginPath();var l=j/2;i.arc(k.x,k.y,l,0,f);i.fill()};d.prototype.getLineWidth=function(){if(!this.stroke){return 0}if(this.stroke==true){return 1}return this.stroke};d.prototype.getRenderColor=function(){var j=typeof this.backface=="string"&&this.isFacingBack;var i=j?this.backface:this.color;return i};d.prototype.renderPath=function(j,n){var k=this.getRenderElement(j,n);var m=this.pathCommands.length==2&&this.pathCommands[1].method=="line";var l=!m&&this.closed;var i=this.getRenderColor();n.renderPath(j,k,this.pathCommands,l);n.stroke(j,k,this.stroke,i,this.getLineWidth());n.fill(j,k,this.fill,i);n.end(j,k)};var e="http://www.w3.org/2000/svg";d.prototype.getRenderElement=function(i,j){if(!j.isSvg){return}if(!this.svgElement){this.svgElement=document.createElementNS(e,"path");this.svgElement.setAttribute("stroke-linecap","round");this.svgElement.setAttribute("stroke-linejoin","round")}return this.svgElement};return d}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./anchor"))}else{var c=b.Zdog;c.Group=a(c.Anchor)}}(this,function factory(a){var b=a.subclass({updateSort:false,visible:true,});b.prototype.updateSortValue=function(){var c=0;this.flatGraph.forEach(function(d){d.updateSortValue();c+=d.sortValue});this.sortValue=c/this.flatGraph.length;if(this.updateSort){this.flatGraph.sort(a.shapeSorter)}};b.prototype.render=function(c,d){if(!this.visible){return}this.flatGraph.forEach(function(e){e.render(c,d)})};b.prototype.updateFlatGraph=function(){var c=[];this.flatGraph=this.addChildFlatGraph(c)};b.prototype.getFlatGraph=function(){return[this]};return b}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./shape"))}else{var c=b.Zdog;c.Rect=a(c.Shape)}}(this,function factory(b){var a=b.subclass({width:1,height:1,});a.prototype.setPath=function(){var c=this.width/2;var d=this.height/2;this.path=[{x:-c,y:-d},{x:c,y:-d},{x:c,y:d},{x:-c,y:d},]};return a}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./shape"))}else{var c=b.Zdog;c.RoundedRect=a(c.Shape)}}(this,function factory(b){var a=b.subclass({width:1,height:1,cornerRadius:0.25,closed:false,});a.prototype.setPath=function(){var f=this.width/2;var h=this.height/2;var e=Math.min(f,h);var c=Math.min(this.cornerRadius,e);var g=f-c;var i=h-c;var d=[{x:g,y:-h},{arc:[{x:f,y:-h},{x:f,y:-i},]},];if(i){d.push({x:f,y:i})}d.push({arc:[{x:f,y:h},{x:g,y:h},]});if(g){d.push({x:-g,y:h})}d.push({arc:[{x:-f,y:h},{x:-f,y:i},]});if(i){d.push({x:-f,y:-i})}d.push({arc:[{x:-f,y:-h},{x:-g,y:-h},]});if(g){d.push({x:g,y:-h})}this.path=d};return a}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./shape"))}else{var c=b.Zdog;c.Ellipse=a(c.Shape)}}(this,function factory(b){var a=b.subclass({diameter:1,width:undefined,height:undefined,quarters:4,closed:false,});a.prototype.setPath=function(){var d=this.width!=undefined?this.width:this.diameter;var c=this.height!=undefined?this.height:this.diameter;var e=d/2;var f=c/2;this.path=[{x:0,y:-f},{arc:[{x:e,y:-f},{x:e,y:0},]},];if(this.quarters>1){this.path.push({arc:[{x:e,y:f},{x:0,y:f},]})}if(this.quarters>2){this.path.push({arc:[{x:-e,y:f},{x:-e,y:0},]})}if(this.quarters>3){this.path.push({arc:[{x:-e,y:-f},{x:0,y:-f},]})}};return a}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./boilerplate"),require("./shape"))}else{var c=b.Zdog;c.Polygon=a(c,c.Shape)}}(this,function factory(d,b){var a=b.subclass({sides:3,radius:0.5,});var c=d.TAU;a.prototype.setPath=function(){this.path=[];for(var e=0;e<this.sides;e++){var f=e/this.sides*c-c/4;var g=Math.cos(f)*this.radius;var h=Math.sin(f)*this.radius;this.path.push({x:g,y:h})}};return a}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./boilerplate"),require("./vector"),require("./anchor"),require("./ellipse"))}else{var c=b.Zdog;c.Hemisphere=a(c,c.Vector,c.Anchor,c.Ellipse)}}(this,function factory(f,g,a,b){var c=b.subclass({fill:true,});var e=f.TAU;c.prototype.create=function(){b.prototype.create.apply(this,arguments);this.apex=new a({addTo:this,translate:{z:this.diameter/2},});this.renderCentroid=new g()};c.prototype.updateSortValue=function(){this.renderCentroid.set(this.renderOrigin).lerp(this.apex.renderOrigin,3/8);this.sortValue=this.renderCentroid.z};c.prototype.render=function(h,i){this.renderDome(h,i);b.prototype.render.apply(this,arguments)};c.prototype.renderDome=function(i,m){if(!this.visible){return}var k=this.getDomeRenderElement(i,m);var h=Math.atan2(this.renderNormal.y,this.renderNormal.x);var j=this.diameter/2*this.renderNormal.magnitude();var o=this.renderOrigin.x;var p=this.renderOrigin.y;if(m.isCanvas){var n=h+e/4;var l=h-e/4;i.beginPath();i.arc(o,p,j,n,l)}else{if(m.isSvg){h=(h-e/4)/e*360;this.domeSvgElement.setAttribute("d","M "+-j+",0 A "+j+","+j+" 0 0 1 "+j+",0");this.domeSvgElement.setAttribute("transform","translate("+o+","+p+" ) rotate("+h+")")}}m.stroke(i,k,this.stroke,this.color,this.getLineWidth());m.fill(i,k,this.fill,this.color);m.end(i,k)};var d="http://www.w3.org/2000/svg";c.prototype.getDomeRenderElement=function(h,i){if(!i.isSvg){return}if(!this.domeSvgElement){this.domeSvgElement=document.createElementNS(d,"path");this.domeSvgElement.setAttribute("stroke-linecap","round");this.domeSvgElement.setAttribute("stroke-linejoin","round")}return this.domeSvgElement};return c}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./boilerplate"),require("./path-command"),require("./shape"),require("./group"),require("./ellipse"))}else{var c=b.Zdog;c.Cylinder=a(c,c.PathCommand,c.Shape,c.Group,c.Ellipse)}}(this,function factory(l,h,i,f,e){function g(){}var d=f.subclass({color:"#333",updateSort:true,});d.prototype.create=function(){f.prototype.create.apply(this,arguments);this.pathCommands=[new h("move",[{}]),new h("line",[{}]),]};d.prototype.render=function(m,n){this.renderCylinderSurface(m,n);f.prototype.render.apply(this,arguments)};d.prototype.renderCylinderSurface=function(m,q){if(!this.visible){return}var n=this.getRenderElement(m,q);var o=this.frontBase;var p=this.rearBase;var r=o.renderNormal.magnitude();var s=o.diameter*r+o.getLineWidth();this.pathCommands[0].renderPoints[0].set(o.renderOrigin);this.pathCommands[1].renderPoints[0].set(p.renderOrigin);if(q.isCanvas){m.lineCap="butt"}q.renderPath(m,n,this.pathCommands);q.stroke(m,n,true,this.color,s);q.end(m,n);if(q.isCanvas){m.lineCap="round"}};var j="http://www.w3.org/2000/svg";d.prototype.getRenderElement=function(m,n){if(!n.isSvg){return}if(!this.svgElement){this.svgElement=document.createElementNS(j,"path")}return this.svgElement};d.prototype.copyGraph=g;var c=e.subclass();c.prototype.copyGraph=g;var b=i.subclass({diameter:1,length:1,frontFace:undefined,fill:true,});var k=l.TAU;b.prototype.create=function(){i.prototype.create.apply(this,arguments);this.group=new d({addTo:this,color:this.color,visible:this.visible,});var n=this.length/2;var m=this.backface||true;this.frontBase=this.group.frontBase=new e({addTo:this.group,diameter:this.diameter,translate:{z:n},rotate:{y:k/2},color:this.color,stroke:this.stroke,fill:this.fill,backface:this.frontFace||m,visible:this.visible,});this.rearBase=this.group.rearBase=this.frontBase.copy({translate:{z:-n},rotate:{y:0},backface:m,})};b.prototype.render=function(){};var a=["stroke","fill","color","visible"];a.forEach(function(n){var m="_"+n;Object.defineProperty(b.prototype,n,{get:function(){return this[m]},set:function(o){this[m]=o;if(this.frontBase){this.frontBase[n]=o;this.rearBase[n]=o;this.group[n]=o}},})});return b}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./boilerplate"),require("./vector"),require("./path-command"),require("./anchor"),require("./ellipse"))}else{var c=b.Zdog;c.Cone=a(c,c.Vector,c.PathCommand,c.Anchor,c.Ellipse)}}(this,function factory(g,h,d,a,c){var b=c.subclass({length:1,fill:true,});var f=g.TAU;b.prototype.create=function(){c.prototype.create.apply(this,arguments);this.apex=new a({addTo:this,translate:{z:this.length},});this.renderApex=new h();this.renderCentroid=new h();this.tangentA=new h();this.tangentB=new h();this.surfacePathCommands=[new d("move",[{}]),new d("line",[{}]),new d("line",[{}]),]};b.prototype.updateSortValue=function(){this.renderCentroid.set(this.renderOrigin).lerp(this.apex.renderOrigin,1/3);this.sortValue=this.renderCentroid.z};b.prototype.render=function(i,j){this.renderConeSurface(i,j);c.prototype.render.apply(this,arguments)};b.prototype.renderConeSurface=function(k,t){if(!this.visible){return}this.renderApex.set(this.apex.renderOrigin).subtract(this.renderOrigin);var u=this.renderNormal.magnitude();var j=this.renderApex.magnitude2d();var p=this.renderNormal.magnitude2d();var m=Math.acos(p/u);var l=Math.sin(m);var s=this.diameter/2*u;var o=s*l<j;if(!o){return}var i=Math.atan2(this.renderNormal.y,this.renderNormal.x)+f/2;var r=j/l;var q=Math.acos(s/r);var v=this.tangentA;var w=this.tangentB;v.x=Math.cos(q)*s*l;v.y=Math.sin(q)*s;w.set(this.tangentA);w.y*=-1;v.rotateZ(i);w.rotateZ(i);v.add(this.renderOrigin);w.add(this.renderOrigin);this.setSurfaceRenderPoint(0,v);this.setSurfaceRenderPoint(1,this.apex.renderOrigin);this.setSurfaceRenderPoint(2,w);var n=this.getSurfaceRenderElement(k,t);t.renderPath(k,n,this.surfacePathCommands);t.stroke(k,n,this.stroke,this.color,this.getLineWidth());t.fill(k,n,this.fill,this.color);t.end(k,n)};var e="http://www.w3.org/2000/svg";b.prototype.getSurfaceRenderElement=function(i,j){if(!j.isSvg){return}if(!this.surfaceSvgElement){this.surfaceSvgElement=document.createElementNS(e,"path");this.surfaceSvgElement.setAttribute("stroke-linecap","round");this.surfaceSvgElement.setAttribute("stroke-linejoin","round")}return this.surfaceSvgElement};b.prototype.setSurfaceRenderPoint=function(i,j){var k=this.surfacePathCommands[i].renderPoints[0];k.set(j)};return b}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./boilerplate"),require("./anchor"),require("./shape"),require("./rect"))}else{var c=b.Zdog;c.Box=a(c,c.Anchor,c.Shape,c.Rect)}}(this,function factory(j,a,h,g){var d=g.subclass();d.prototype.copyGraph=function(){};var i=j.TAU;var f=["frontFace","rearFace","leftFace","rightFace","topFace","bottomFace",];var c=j.extend({},h.defaults);delete c.path;f.forEach(function(k){c[k]=true});j.extend(c,{width:1,height:1,depth:1,fill:true,});var b=a.subclass(c);b.prototype.create=function(k){a.prototype.create.call(this,k);this.updatePath();this.fill=this.fill};b.prototype.updatePath=function(){f.forEach(function(k){this[k]=this[k]},this)};f.forEach(function(l){var k="_"+l;Object.defineProperty(b.prototype,l,{get:function(){return this[k]},set:function(m){this[k]=m;this.setFace(l,m)},})});b.prototype.setFace=function(k,o){var n=k+"Rect";var m=this[n];if(!o){this.removeChild(m);return}var l=this.getFaceOptions(k);l.color=typeof o=="string"?o:this.color;if(m){m.setOptions(l)}else{m=this[n]=new d(l)}m.updatePath();this.addChild(m)};b.prototype.getFaceOptions=function(k){return{frontFace:{width:this.width,height:this.height,translate:{z:this.depth/2},},rearFace:{width:this.width,height:this.height,translate:{z:-this.depth/2},rotate:{y:i/2},},leftFace:{width:this.depth,height:this.height,translate:{x:-this.width/2},rotate:{y:-i/4},},rightFace:{width:this.depth,height:this.height,translate:{x:this.width/2},rotate:{y:i/4},},topFace:{width:this.width,height:this.depth,translate:{y:-this.height/2},rotate:{x:-i/4},},bottomFace:{width:this.width,height:this.depth,translate:{y:this.height/2},rotate:{x:i/4},},}[k]};var e=["color","stroke","fill","backface","front","visible"];e.forEach(function(l){var k="_"+l;Object.defineProperty(b.prototype,l,{get:function(){return this[k]},set:function(m){this[k]=m;f.forEach(function(n){var q=this[n+"Rect"];var p=typeof this[n]=="string";var o=l=="color"&&p;if(q&&!o){q[l]=m}},this)},})});return b}));(function(b,a){if(typeof module=="object"&&module.exports){module.exports=a(require("./boilerplate"),require("./canvas-renderer"),require("./svg-renderer"),require("./vector"),require("./anchor"),require("./dragger"),require("./illustration"),require("./path-command"),require("./shape"),require("./group"),require("./rect"),require("./rounded-rect"),require("./ellipse"),require("./polygon"),require("./hemisphere"),require("./cylinder"),require("./cone"),require("./box"))}else{if(typeof define=="function"&&define.amd){define("zdog",[],b.Zdog)}}})(this,function factory(r,c,p,q,a,f,j,k,o,h,m,n,g,l,i,e,d,b){r.CanvasRenderer=c;r.SvgRenderer=p;r.Vector=q;r.Anchor=a;r.Dragger=f;r.Illustration=j;r.PathCommand=k;r.Shape=o;r.Group=h;r.Rect=m;r.RoundedRect=n;r.Ellipse=g;r.Polygon=l;r.Hemisphere=i;r.Cylinder=e;r.Cone=d;r.Box=b;return r});